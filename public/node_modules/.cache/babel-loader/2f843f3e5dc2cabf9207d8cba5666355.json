{"ast":null,"code":"import _slicedToArray from\"/home/brinton/Development/Phase5/Reddit-Sentiment-Analyzer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import{Form,Button}from\"semantic-ui-react\";import{Context}from\"../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useContext=useContext(Context),setUser=_useContext.setUser,setLoggedin=_useContext.setLoggedin,setIsUpdating=_useContext.setIsUpdating,CSRFToken=_useContext.CSRFToken;var history=useHistory();// Login\nvar handleLogin=function handleLogin(e){e.preventDefault();// Includes CSRF token for deployment to Heroku\nvar postObj={method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-CSRF-Token\":CSRFToken(document.cookie)},body:JSON.stringify({email:email,password:password})};fetch(\"/api/login\",postObj).then(function(r){return r.json();}).then(function(user){if(!!user.id){setUser(user);setLoggedin(true);setSuccess(true);history.push(\"success\");}else{setSuccess(false);}}).catch(function(err){return console.log(err);});};// Renders forms with toggle for signin/signup\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[setIsUpdating(false),/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),success?null:/*#__PURE__*/_jsx(\"h3\",{className:\"Alert\",children:\"Wrong email or password.\"}),/*#__PURE__*/_jsx(Button,{primary:true,type:\"submit\",children:\"Login\"})]})]});};export default Login;","map":{"version":3,"sources":["/home/brinton/Development/Phase5/Reddit-Sentiment-Analyzer/client/src/Components/Login.js"],"names":["React","useState","useContext","useHistory","Form","Button","Context","Login","email","setEmail","password","setPassword","success","setSuccess","setUser","setLoggedin","setIsUpdating","CSRFToken","history","handleLogin","e","preventDefault","postObj","method","headers","document","cookie","body","JSON","stringify","fetch","then","r","json","user","id","push","catch","err","console","log","target","value"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,mBAA7B,CACA,OAASC,OAAT,KAAwB,oBAAxB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAAgCR,QAAQ,CAAC,EAAD,CAAxC,yCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAA8BV,QAAQ,CAAC,IAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eACA,gBAA2DX,UAAU,CAACI,OAAD,CAArE,CAAQQ,OAAR,aAAQA,OAAR,CAAiBC,WAAjB,aAAiBA,WAAjB,CAA8BC,aAA9B,aAA8BA,aAA9B,CAA6CC,SAA7C,aAA6CA,SAA7C,CACA,GAAIC,CAAAA,OAAO,CAAGf,UAAU,EAAxB,CAEA;AAEA,GAAMgB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GACA;AACA,GAAMC,CAAAA,OAAO,CAAG,CACdC,MAAM,CAAE,MADM,CAEdC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,eAAgBP,SAAS,CAACQ,QAAQ,CAACC,MAAV,CAFlB,CAFK,CAMdC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAErB,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAAf,CANQ,CAAhB,CAQAoB,KAAK,CAAC,YAAD,CAAeR,OAAf,CAAL,CACGS,IADH,CACQ,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,IAAF,EAAP,EADR,EAEGF,IAFH,CAEQ,SAACG,IAAD,CAAU,CACd,GAAI,CAAC,CAACA,IAAI,CAACC,EAAX,CAAe,CACbrB,OAAO,CAACoB,IAAD,CAAP,CACAnB,WAAW,CAAC,IAAD,CAAX,CACAF,UAAU,CAAC,IAAD,CAAV,CACAK,OAAO,CAACkB,IAAR,CAAa,SAAb,EACD,CALD,IAKO,CACLvB,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAXH,EAYGwB,KAZH,CAYS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAZT,EAaD,CAxBD,CA0BA;AACA,mBACE,uBACGtB,aAAa,CAAC,KAAD,CADhB,cAEE,MAAC,IAAD,EAAM,QAAQ,CAAEG,WAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,yBACE,gCADF,cAEE,cAAO,WAAW,CAAC,OAAnB,CAA2B,KAAK,CAAEX,KAAlC,CAAyC,QAAQ,CAAE,kBAACY,CAAD,QAAOX,CAAAA,QAAQ,CAACW,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAf,EAAnD,EAFF,GADF,cAKE,MAAC,IAAD,CAAM,KAAN,yBACE,mCADF,cAEE,cACE,WAAW,CAAC,UADd,CAEE,KAAK,CAAEhC,QAFT,CAGE,QAAQ,CAAE,kBAACU,CAAD,QAAOT,CAAAA,WAAW,CAACS,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAlB,EAHZ,EAFF,GALF,CAaG9B,OAAO,CAAG,IAAH,cAAU,WAAI,SAAS,CAAC,OAAd,sCAbpB,cAcE,KAAC,MAAD,EAAQ,OAAO,KAAf,CAAgB,IAAI,CAAC,QAArB,mBAdF,GAFF,GADF,CAuBD,CA3DD,CA6DA,cAAeL,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Button } from \"semantic-ui-react\";\nimport { Context } from \"../context/Context\";\n\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [success, setSuccess] = useState(true);\n  const { setUser, setLoggedin, setIsUpdating, CSRFToken } = useContext(Context);\n  let history = useHistory();\n\n  // Login\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    // Includes CSRF token for deployment to Heroku\n    const postObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-Token\": CSRFToken(document.cookie),\n      },\n      body: JSON.stringify({ email, password }),\n    };\n    fetch(\"/api/login\", postObj)\n      .then((r) => r.json())\n      .then((user) => {\n        if (!!user.id) {\n          setUser(user);\n          setLoggedin(true);\n          setSuccess(true);\n          history.push(\"success\");\n        } else {\n          setSuccess(false);\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  // Renders forms with toggle for signin/signup\n  return (\n    <div>\n      {setIsUpdating(false)}\n      <Form onSubmit={handleLogin}>\n        <Form.Field>\n          <label>Email</label>\n          <input placeholder='Email' value={email} onChange={(e) => setEmail(e.target.value)} />\n        </Form.Field>\n        <Form.Field>\n          <label>Password</label>\n          <input\n            placeholder='password'\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </Form.Field>\n        {success ? null : <h3 className='Alert'>Wrong email or password.</h3>}\n        <Button primary type='submit'>\n          Login\n        </Button>\n      </Form>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}