(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{310:function(e,t,n){},311:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var c=n(7),s=n.n(c),r=n(270),a=n.n(r),j=(n(310),n(311),n(485)),i=n(16),l=n(28),o=n(484),d=n(464),b=n(1),u=Object(c.createContext)(),h=function(e){var t=Object(c.useState)({}),n=Object(i.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),j=Object(i.a)(a,2),l=j[0],o=j[1],d=Object(c.useState)(),h=Object(i.a)(d,2),O=h[0],x=h[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),g=f[0],p=f[1],v=Object(c.useState)(""),S=Object(i.a)(v,2),C=S[0],y=S[1],_=Object(c.useState)(""),U=Object(i.a)(_,2),R=U[0],T=U[1],w=Object(c.useState)("comment"),k=Object(i.a)(w,2),D=k[0],F=k[1],L=Object(c.useState)(!1),P=Object(i.a)(L,2),E={user:s,setUser:r,loggedin:l,setLoggedin:o,results:O,setResults:x,sUsername:g,setSUsername:p,subreddit:C,setSubreddit:y,searchTerms:R,setSearchTerms:T,searchTarget:D,setSearchTarget:F,isUpdating:P[0],setIsUpdating:P[1],CSRFToken:function(e){return e?e.split("; ").find((function(e){return e.startsWith("CSRF-TOKEN=")})).split("=")[1]:e}};return Object(b.jsx)(u.Provider,{value:E,children:e.children})},O=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),a=Object(i.a)(r,2),j=a[0],h=a[1],O=Object(c.useState)(!0),x=Object(i.a)(O,2),m=x[0],f=x[1],g=Object(c.useContext)(u),p=g.setUser,v=g.setLoggedin,S=g.setIsUpdating,C=g.CSRFToken,y=Object(l.f)();return Object(b.jsxs)("div",{children:[S(!1),Object(b.jsxs)(o.a,{onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":C(document.cookie)},body:JSON.stringify({email:n,password:j})};fetch("/login",t).then((function(e){return e.json()})).then((function(e){e.id?(p(e),v(!0),f(!0),y.push("success")):f(!1)})).catch((function(e){return console.log(e)}))},children:[Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{placeholder:"Email",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{placeholder:"password",value:j,onChange:function(e){return h(e.target.value)}})]}),m?null:Object(b.jsx)("h3",{className:"Alert",children:"Wrong email or password."}),Object(b.jsx)(d.a,{primary:!0,type:"submit",children:"Login"})]})]})},x=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(),a=Object(i.a)(r,2),j=a[0],h=a[1],O=Object(c.useState)(""),x=Object(i.a)(O,2),m=x[0],f=x[1],g=Object(l.f)(),p=Object(c.useContext)(u),v=p.user,S=p.setUser,C=p.loggedin,y=p.setLoggedin,_=p.isUpdating,U=p.setIsUpdating;Object(c.useEffect)((function(){s(v.username),h(v.email)}),[v.username,v.email]);return Object(b.jsxs)("div",{children:[C?null:U(!1),Object(b.jsxs)(o.a,{onSubmit:function(e){if(e.preventDefault(),!n||!j||!m)return console.log("field(s) missing");fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,email:j,password:m})}).then((function(e){return e.json()})).then((function(e){console.log(e),S(e),y(!0),g.push("success")})).catch((function(e){return console.log(e)}))},children:[Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{placeholder:"Username",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{placeholder:"Email",value:j,onChange:function(e){return h(e.target.value)}})]}),_?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("h3",{children:"Please enter new username or email."})}):Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{placeholder:"password",value:m,onChange:function(e){return f(e.target.value)}})]}),Object(b.jsx)(o.a.Field,{}),_?Object(b.jsx)(d.a,{primary:!0,onClick:function(e){e.preventDefault(),fetch("/update",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,email:j})}).then((function(e){return e.json()})).then((function(e){U(!1),g.push("success")})).catch((function(e){return console.log("Update err = ",e)}))},children:"Update"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{style:{textAlign:"right"},children:"* All fields required"}),Object(b.jsx)(d.a,{primary:!0,type:"submit",children:"Signup"})]})]})]})},m=function(e){var t=e.handleLogout,n=e.renderUpdatePage,s=Object(c.useContext)(u),r=s.user,a=s.loggedin;return Object(b.jsx)("div",{children:a?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{children:["Username: ",r.username," "]}),Object(b.jsxs)("h3",{children:["email: ",r.email]}),Object(b.jsx)(d.a,{primary:!0,onClick:n,children:"Update"}),Object(b.jsx)(d.a,{primary:!0,onClick:t,children:"Logout"})]}):Object(b.jsx)(O,{})})},f=n(492),g=n(104),p=n(477),v=n(486),S=n(45),C=function(){return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"Link",children:[Object(b.jsx)(S.b,{to:"/login",children:"Login"})," | ",Object(b.jsx)(S.b,{to:"/signup",children:"Sign Up"})]})})},y=function(e){var t=e.handleLogout,n=e.findMe,s=Object(c.useContext)(u),r=s.loggedin,a=s.setIsUpdating,j=Object(c.useState)(!1),o=Object(i.a)(j,2),d=o[0],h=o[1],O=Object(l.f)(),x=function(){n(),h(!d)};return Object(b.jsxs)("div",{children:[Object(b.jsx)(f.a,{as:"h1",children:Object(b.jsx)(f.a.Content,{children:Object(b.jsxs)("div",{as:"h1.ui.header",children:[Object(b.jsx)(g.a,{name:"reddit"}),Object(b.jsx)("big",{children:"Emot/r"}),Object(b.jsx)(g.a,{id:"userIcon",name:"user outline",onClick:x})]})})}),Object(b.jsx)(p.a,{hidden:!0}),Object(b.jsx)(v.a,{visible:d,animation:"fade",duration:300,children:Object(b.jsx)("div",{children:r?Object(b.jsx)(m,{handleLogout:t,renderUpdatePage:function(){a(!0),x(),O.push("/signup")}}):Object(b.jsx)(C,{})})})]})},_=n(488),U=n(478),R=n(482),T=n(287),w=n(288),k=n(153),D=n(290),F=function(e){var t=e.emoDoc.emotion,n=[{name:"Sadness",Score:t.sadness},{name:"Joy",Score:t.joy},{name:"Fear",Score:t.fear},{name:"Disgust",Score:t.disgust},{name:"Anger",Score:t.anger}],c=Object(b.jsxs)(U.a,{width:325,height:250,data:n,margin:{top:5,right:5,left:0,bottom:5},children:[Object(b.jsx)(R.a,{strokeDasharray:"3 3"}),Object(b.jsx)(T.a,{dataKey:"name"}),Object(b.jsx)(w.a,{type:"number",domain:[0,1]}),Object(b.jsx)(k.a,{}),Object(b.jsx)(D.a,{dataKey:"Score",fill:"#8884d8"})]});return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Emotional score overall "}),c]})},L=function(e){var t=e.targ,n=t.emotion,c=[{name:"Sadness",uv:n.sadness},{name:"Joy",uv:n.joy},{name:"Fear",uv:n.fear},{name:"Disgust",uv:n.disgust},{name:"Anger",uv:n.anger}],s=Object(b.jsxs)(U.a,{width:325,height:250,data:c,margin:{top:5,right:5,left:0,bottom:5},children:[Object(b.jsx)(R.a,{strokeDasharray:"1 3"}),Object(b.jsx)(T.a,{dataKey:"name",fontSize:"15"}),Object(b.jsx)(w.a,{type:"number",domain:[0,1]}),Object(b.jsx)(k.a,{}),Object(b.jsx)(D.a,{dataKey:"uv",fill:"#3884d8"})]});return Object(b.jsxs)("div",{className:"rechats-wrapper",children:[Object(b.jsxs)("p",{children:["Emotional score for ",Object(b.jsx)("strong",{children:t.text})]}),s]})},P=function(e){var t=e.item,n=t.search_results[0].emo_doc_json,c=t.search_results[0].emo_search_json,s=t.search_results[0].sent_doc_json;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"search"}),"Search Info"]})}),Object(b.jsx)(_.a,{unstackable:!0,children:Object(b.jsxs)(_.a.Body,{children:[Object(b.jsxs)(_.a.Row,{textAlign:"center",children:[Object(b.jsx)(_.a.Cell,{children:"Date:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.created_at.slice(0,10)})}),Object(b.jsx)(_.a.Cell,{children:"Reddit User:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.author.name})})]}),Object(b.jsxs)(_.a.Row,{textAlign:"center",children:[Object(b.jsx)(_.a.Cell,{children:"Subreddit:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.subreddit.name})}),Object(b.jsx)(_.a.Cell,{children:"Topic:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.search_term.search_term})})]})]})}),Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"bar chart"}),"Results"]})}),Object(b.jsxs)("h3",{children:["Overall Sentiment Score: ",s.score," (",s.label,")"]}),Object(b.jsxs)("div",{className:"emoDocResults",children:[Object(b.jsx)(F,{emoDoc:n}),c?c.map((function(e,t){return Object(b.jsx)(L,{targ:e},t)})):null]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})},E=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){r()}),[]);var r=function(){fetch("/my_searches").then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return console.log("error =",e)}))};return Object(b.jsx)("div",{children:n.length>1?n.map((function(e,t){return Object(b.jsx)(P,{item:e},t)})):Object(b.jsx)("h3",{children:"No search results available"})})},A=function(e){var t=e.findMe,n=Object(c.useContext)(u).user;return Object(c.useEffect)((function(){t()}),[]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:["Welcome ",n.username,"."]}),Object(b.jsx)("h3",{children:"Click a tab to continue."})]})},N=n(224),I=n(490),z=n(483),J=n(476),M=function(){var e=Object(l.f)(),t=Object(c.useState)(!1),n=Object(i.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),j=Object(i.a)(a,2),h=j[0],O=j[1],x=Object(c.useContext)(u),m=x.user,f=x.setResults,g=x.sUsername,p=x.setSUsername,v=x.subreddit,S=x.setSubreddit,C=x.searchTerms,y=x.setSearchTerms,_="https://api.pushshift.io/reddit/search/"+x.searchTarget+"/?q="+C+"&subreddit="+v+"&author="+g+"&fields=author,created_utc,body,score,subreddit,url,title,selftext,permalink&size=50";return Object(b.jsxs)(N.a,{children:[h?Object(b.jsx)(I.a,{active:!0,inverted:!0,children:Object(b.jsx)(z.a,{children:"Analyzing..."})}):null,Object(b.jsxs)(o.a,{onSubmit:function(t){t.preventDefault(),O(!0),console.log(_);var n={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({user:m,url:_,sUsername:g,subreddit:v,searchTerms:C})};fetch("/reddit",n).then((function(t){t.ok?t.json().then((function(t){f(t),r(!1),e.push("/results")})):t.json().then((function(e){console.log("SERVER ERR: ",e.errors),r(!0)}))}))},children:[Object(b.jsx)("h2",{children:"Discover emotional content on Reddit."}),Object(b.jsx)(o.a.Field,{children:Object(b.jsx)(J.a,{icon:"search",iconPosition:"left",placeholder:"u/ username",value:g,onChange:function(e){return p(e.target.value)}})}),Object(b.jsx)(o.a.Field,{children:Object(b.jsx)(J.a,{icon:"search",iconPosition:"left",placeholder:"r/ subreddit",value:v,onChange:function(e){return S(e.target.value)}})}),Object(b.jsxs)(o.a.Field,{children:[Object(b.jsx)(J.a,{icon:"search",iconPosition:"left",placeholder:"search terms",value:C,onChange:function(e){return y(e.target.value)}}),s?Object(b.jsx)("h4",{style:{color:"red"},children:"No Results Found. Please Search Again."}):null]}),Object(b.jsx)("br",{}),Object(b.jsx)(d.a,{primary:!0,type:"submit",children:"Search"})]})]})},B=function(e){var t=e.item,n=t.search_results[0].emo_doc_json,c=t.search_results[0].emo_search_json,s=t.search_results[0].sent_doc_json;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"search"}),"Search Info"]})}),Object(b.jsx)(_.a,{unstackable:!0,children:Object(b.jsxs)(_.a.Body,{children:[Object(b.jsxs)(_.a.Row,{textAlign:"center",children:[Object(b.jsx)(_.a.Cell,{children:"Username:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsxs)("strong",{children:[t.user.username,"s"]})}),Object(b.jsx)(_.a.Cell,{children:"Reddit User:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.author.name})})]}),Object(b.jsxs)(_.a.Row,{textAlign:"center",children:[Object(b.jsx)(_.a.Cell,{children:"Subreddit:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.subreddit.name})}),Object(b.jsx)(_.a.Cell,{children:"Topic:"}),Object(b.jsx)(_.a.Cell,{children:Object(b.jsx)("strong",{children:t.search_term.search_term})})]})]})}),Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"bar chart"}),"Results"]})}),Object(b.jsxs)("h3",{children:["Overall Sentiment Score: ",s.score," (",s.label,")"]}),Object(b.jsxs)("div",{className:"emoDocResults",children:[Object(b.jsx)(F,{emoDoc:n}),c?c.map((function(e,t){return Object(b.jsx)(L,{targ:e},t)})):null]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})},K=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){r()}),[]);var r=function(){fetch("/top_content").then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return console.log("error =",e)}))};return Object(b.jsx)("div",{children:n.map((function(e,t){return Object(b.jsx)(B,{item:e},t)}))})},W=function(){var e=Object(c.useContext)(u),t=e.results,n=e.sUsername,s=e.subreddit,r=e.searchTerms;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"search"}),"Search Info"]})}),Object(b.jsx)(_.a,{unstackable:!0,children:Object(b.jsx)(_.a.Body,{children:Object(b.jsxs)(_.a.Row,{textAlign:"left",style:{fontWeight:"bold"},children:[Object(b.jsx)(_.a.Cell,{className:"cellLabel",children:"Reddit User:"}),Object(b.jsx)(_.a.Cell,{children:n||"-"}),Object(b.jsx)(_.a.Cell,{className:"cellLabel",children:"Subreddit:"}),Object(b.jsx)(_.a.Cell,{children:s||"-"}),Object(b.jsx)(_.a.Cell,{className:"cellLabel",children:"Topic:"}),Object(b.jsx)(_.a.Cell,{children:r||"-"})]})})}),Object(b.jsx)(p.a,{horizontal:!0,children:Object(b.jsxs)(f.a,{as:"h3",children:[Object(b.jsx)(g.a,{name:"bar chart"}),"Results"]})}),Object(b.jsxs)("h3",{children:["Overall Sentiment Score: ",t.sentimentDocument.score," (",t.sentimentDocument.label,")"]}),Object(b.jsxs)("div",{className:"emoDocResults",children:[Object(b.jsx)(F,{emoDoc:t.emotionDocument}),t.emotionTarget?t.emotionTarget.map((function(e,t){return Object(b.jsx)(L,{targ:e},t)})):null]})]})},q=n(489),G=function(e){var t=e.result,n="http://www.reddit.com"+t.permalink;return Object(b.jsxs)(q.a.Group,{itemsPerRow:1,children:[Object(b.jsxs)(q.a,{centered:!0,href:n,target:"_blank",children:[Object(b.jsx)(q.a.Content,{textAlign:"left",header:t.author+" says..."}),Object(b.jsx)(q.a.Content,{textAlign:"left",description:t.body}),Object(b.jsxs)(q.a.Content,{extra:!0,children:["Subreddit: ",t.subreddit]})]}),Object(b.jsx)("br",{})]})},H=function(){var e=Object(c.useContext)(u).results;return Object(b.jsx)("div",{className:"results",children:e?Object(b.jsxs)("div",{children:[Object(b.jsx)(W,{}),e.data.map((function(e,t){return Object(b.jsx)(G,{result:e},t)}))]}):Object(b.jsx)("h3",{children:"Results not available. Please try your search again. "})})},V=n.p+"static/media/SampleTopContent2.3e3adb3d.jpg",X=n(291),Q=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{style:{textAlign:"left"},children:"Just a sample..."}),Object(b.jsx)("hr",{}),Object(b.jsx)(X.a,{src:V,fluid:!0}),Object(b.jsx)("hr",{}),Object(b.jsx)("h1",{children:"Login to view!"}),Object(b.jsx)(C,{})]})},Y=function(){var e=Object(c.useContext)(u),t=e.setUser,n=e.loggedin,s=e.setLoggedin,r=Object(l.f)();Object(c.useEffect)((function(){a()}),[]);var a=function(){fetch("/me").then((function(e){return e.json()})).then((function(e){console.log("current user: ",e),e.error||(t(e),s(!0),r.push("/"))})).catch((function(e){return console.log("error =",e)}))},i=function(){fetch("/logout",{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log("Logged out."),s(!1),t({}),window.location.reload()})).catch((function(e){return console.log(e)}))},o=[{menuItem:{as:S.c,content:"Most Recent",to:"/top_content",exact:!0,key:"top_content"},render:function(){return Object(b.jsx)(l.a,{path:"/top_content",exact:!0,children:Object(b.jsx)(j.a.Pane,{children:Object(b.jsx)("div",{children:n?Object(b.jsx)(K,{}):Object(b.jsx)("div",{children:Object(b.jsx)(Q,{})})})})})}},{menuItem:{as:S.c,content:"Search",to:"/",exact:!0,key:"home"},render:function(){return Object(b.jsx)(l.a,{path:"/",exact:!0,children:Object(b.jsx)(j.a.Pane,{children:Object(b.jsxs)("div",{children:[" ",Object(b.jsx)(M,{})]})})})}},{menuItem:n?{as:S.c,content:"My Searches",to:"/my_searches",exact:!0,key:"my_searches"}:{},render:function(){return Object(b.jsx)(l.a,{path:"/my_searches",exact:!0,children:Object(b.jsx)(j.a.Pane,{children:Object(b.jsx)("div",{children:Object(b.jsx)(E,{})})})})}}],d=o.findIndex((function(e){return!!Object(l.e)(window.location.pathname,{path:e.menuItem.to,exact:!0})}));return Object(b.jsx)(S.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("br",{}),Object(b.jsx)(y,{handleLogout:i,handleUpdate:function(){r.push("/signup")},findMe:a}),Object(b.jsx)("hr",{}),Object(b.jsx)(j.a,{panes:o,defaultActiveIndex:d}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{}),Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/login",component:O}),Object(b.jsx)(l.a,{exact:!0,path:"/signup",component:x}),Object(b.jsx)(l.a,{exact:!0,path:"/results",component:H}),Object(b.jsx)(l.a,{exact:!0,path:"/success",children:Object(b.jsx)(A,{findMe:a})}),Object(b.jsx)(l.a,{exact:!0,path:"/profile",children:Object(b.jsx)(m,{handleLogout:i})})]})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,493)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};n(462);a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(S.a,{children:Object(b.jsx)(h,{children:Object(b.jsx)(Y,{})})})}),document.getElementById("root")),Z()}},[[463,1,2]]]);
//# sourceMappingURL=main.87b7e04e.chunk.js.map